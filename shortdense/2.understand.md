---
theme: gaia
_class: lead
paginate: true
backgroundColor: #fff
marp: true
style: @import url('https://unpkg.com/tailwindcss@^2/dist/utilities.min.css');
---

# 2ì¼ì°¨: ì´í•´í•˜ê¸°

#### Kubernetes for ê¸ˆìœµê²°ì œì›

---

```
- [New][3êµì‹œ] ì‹±ê¸€ë…¸ë“œ Kubernetes ë°°í¬
- [1êµì‹œ] Kubernetes êµ¬ì„±ìš”ì†Œ - 1
  - etcd
  - kube-apiserver
  - kubelet
  - kube-scheduler
  - kube-proxy
- [2êµì‹œ] Kubernetes êµ¬ì„±ìš”ì†Œ - 2 + Controller ë€?
  - kube-controller-manager
  - cloud-controller-manager
- [IGNORE][4, 5êµì‹œ] Kubernetes ì¸ì¦ / ì¸ê°€ / Admission Controller
- [New][4, 5 êµì‹œ] Kubernetes ë¬´ì¤‘ë‹¨ ë°°í¬ í•´ë³´ê¸°
- [6êµì‹œ] ë„¤íŠ¸ì›Œí¬ or StatefulSet/DaemonSet/ConfigMap/Secret
```

---

<!--1ì‹œê°„-->

# ì‹¤ìŠµ: ì‹±ê¸€ë…¸ë“œ Kubernetes ë°°í¬

---

ì ‘ì†ì •ë³´: https://docs.google.com/spreadsheets/d/1R3R_ol5lExWJ7k0RjKcVTIGl56QrQBFpWgLKWh6FTh0/edit?usp=sharing

ì ‘ì†í‚¤: https://drive.google.com/file/d/1UgLHdmFq9zsxmcGPCoMdt7mGgH4yKzP1/view?usp=sharing

---

```bash
# Kubernetes Network
cat <<EOF | tee /etc/modules-load.d/k8s.conf
overlay
br_netfilter
EOF

cat <<EOF | tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-iptables  = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.ip_forward                 = 1
EOF

# kubeadm, kubelet, kubectl
apt-get update
apt-get install -y apt-transport-https ca-certificates curl
curl -fsSL https://packages.cloud.google.com/apt/doc/apt-key.gpg\
 | gpg --dearmor -o /etc/apt/keyrings/kubernetes-archive-keyring.gpg
echo "deb [signed-by=/etc/apt/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main"\
 | tee /etc/apt/sources.list.d/kubernetes.list
apt-get update
apt-get install -y kubelet kubeadm kubectl
apt-mark hold kubelet kubeadm kubectl

# Containerd
apt-get install -y containerd
cat <<EOF | tee /etc/crictl.yaml
runtime-endpoint: unix:///run/containerd/containerd.sock
image-endpoint: unix:///run/containerd/containerd.sock
EOF
mkdir /etc/containerd
containerd config default | tee /etc/containerd/config.toml
sed -i 's/            SystemdCgroup = false/            SystemdCgroup = true/' /etc/containerd/config.toml
```

---

```bash
kubeadm init --pod-network-cidr 10.244.0.0/16

mkdir -p $HOME/.kube
cp -i /etc/kubernetes/admin.conf $HOME/.kube/config

kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml
```

---

# ì‹¤ìŠµ: ë¡œì»¬ì—ì„œ kubectl ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ì„¸íŒ…í•˜ê¸°

---

# ì™œ ë¡œì»¬ë¡œ ì˜®ê¸°ë©´ ì‘ë™ì´ ì•ˆë˜ì£ ?

---

# ì–´ë–»ê²Œ í•˜ë©´ ë ê¹Œìš”?

---

# ë°ëª¨: kubectl ëª…ë ¹ì–´ ë³´ê¸°

---

<!--1ì‹œê°„-->

# Kubernetes êµ¬ì„±ìš”ì†Œ

- etcd
- kube-apiserver
- kubelet
- kube-scheduler
- kube-proxy

---

## Overview

![w:1000](https://kubernetes.io/images/docs/components-of-kubernetes.svg)

---

## etcd

- Kubernetes ì „ì²´ êµ¬ì„±ì—ì„œ ìœ ì¼í•˜ê²Œ Stateful í•œ ì»´í¬ë„ŒíŠ¸
- Kubernetes ìƒì˜ ëª¨ë“  ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ”
  NoSQL DB / Key Value DB / CP System
- Kubernetes ê°€ ë¬´ì œí•œ í™•ì¥ì„ í•˜ëŠ”ë° ê±°ì˜ ìœ ì¼í•œ ë³‘ëª©ì§€ì 
  SSD ì˜ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë°›ê³ , ë…¸ë“œ ê·œëª¨ê°€ 1,000 ëŒ€ë¥¼ ë„˜ì–´ê°€ê¸° ì‹œì‘í•˜ë©´ ê´€ì‹¬ì´ í•„ìš”
- ê¸°ë³¸ì ìœ¼ë¡œ Redis ì˜ GET, SET, MONITOR ì— í•´ë‹¹í•˜ëŠ” ê¸°ëŠ¥ë“¤ë§Œ ì£¼ë¡œ í™œìš©

---

# etcd

- etcd ëŠ”
  Consistency, Availability, Partition Tolerance (CAP) Theorem ì—ì„œ
  CP ë¥¼ ì¶”êµ¬í•˜ëŠ” ì‹œìŠ¤í…œ
- ë¬´ìŠ¨ì¼ì´ ìˆì–´ë„ ì‘ë™ì´ ì•ˆí• ì§€ì–¸ì • Split Brain í˜„ìƒì€ ë°œìƒí•˜ì§€ ì•ŠìŒ
  (= ë…¸ë“œê°„ ì„œë¡œ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ë“¤ê³ ìˆì„ ê°€ëŠ¥ì„±ì´ ì—†ìŒ)
- ëŒ€ì‹  ê³ ê°€ìš©ì„±ì„ í¬ìƒí•˜ì˜€ê³  `Quorum` ì´ë¼ëŠ” ì œì•½ì´ ì¡´ì¬
  - `âŒŠì´ ë…¸ë“œê°œìˆ˜ / 2âŒ‹ + 1` ê°œ ì´ìƒì˜ ë…¸ë“œê°€ ì‚´ì•„ìˆì„ë•Œë§Œ ì“°ê¸° ê°€ëŠ¥
  - ë…¸ë“œê°œìˆ˜ê°€ 3ê°œë¼ë©´, 2ê°œ ì´ìƒì´ ì‚´ì•„ìˆì–´ì•¼í•˜ê³ , 1ê°œì˜ ì¥ì•  í—ˆìš©
  - ë…¸ë“œê°œìˆ˜ê°€ 5ê°œë¼ë©´, 3ê°œ ì´ìƒì´ ì‚´ì•„ìˆì–´ì•¼í•˜ê³ , 2ê°œì˜ ì¥ì•  í—ˆìš©

---

# etcd

- Kubernetes Controlplane ë…¸ë“œë¥¼ êµ¬ì„±í• ë•Œ 1ê°œ, 3ê°œ, 5ê°œ ë¡œ êµ¬ì„±í•˜ëŠ”
  ìœ ì¼í•œ ì´ìœ 
- ì´ëŸ¬í•œ ì œí•œì—ì„œ ë²—ì–´ë‚˜ê¸°ìœ„í•´ [etcd API í˜¸í™˜ì„±ë§Œ ë§ì¶”ê³  etcd ë¥¼ ì‚¬ìš© ì•ˆí•˜ëŠ” ì¼€ì´ìŠ¤](https://github.com/k3s-io/kine)ë„ ë‹¤ìˆ˜ ì¡´ì¬
  - ì–´ëŠì •ë„ ë‹¤ìš´íƒ€ì„ì„ í—ˆìš©í•˜ëŠ”ê²½ìš° etcd ëŒ€ì‹  MySQL ê°™ì€ DB ë¥¼ ì‚¬ìš©
- í˜¹ì€ í•˜ë‚˜ì˜ etcd í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ìˆ˜ì˜ K8s í´ëŸ¬ìŠ¤í„°ë“¤ì´ ê³µìœ í•´ì„œ ì‚¬ìš©
  - í´ëŸ¬ìŠ¤í„°ë³„ë¡œ Controlplane ë…¸ë“œ ê´€ë¦¬ ìˆ˜ìš”ë¥¼ í™• ì¤„ì„
- ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ìƒë‹¹íˆ ì•ˆì •ì ì¸ ì‹œìŠ¤í…œì´ê¸° ë•Œë¬¸ì— ë„ë¦¬ ì‚¬ìš©ë˜ê³ 
  ë³„ ë¬¸ì œëŠ” ì˜ ì•ˆìƒê¹€

---

## kube-apiserver

![w:1000](https://kubernetes.io/images/docs/components-of-kubernetes.svg)

---

# kube-apiserver

- etcd ë¥¼ DB ë¡œ í™œìš©í•˜ëŠ” API ì„œë²„
- HTTP ë¥¼ ì‚¬ìš©í•˜ë©° `JSON`/`YAML`/`Protobuf`/`SPDY` ë“±ìœ¼ë¡œ í†µì‹ 
- ê¸°ë³¸ì ìœ¼ë¡œ Kubernetes ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì€ `kube-apiserver` ì™€ í†µì‹ 
- ê¸°ë³¸ì ìœ¼ë¡œ ì„ ì–¸í˜•ìœ¼ë¡œ API ê°€ ì„¤ê³„ë˜ì–´ìˆìœ¼ë©° ì´ë¥¼ Resource ë¼ê³  í‘œí˜„í•¨
- ê°€ë” ì„ ì–¸í˜•ìœ¼ë¡œ ê´€ë¦¬ ëª»í•˜ëŠ” ì•¡ì…˜ë“¤ì€ Subresource í˜•íƒœë¡œ API ë¥¼ í‘œí˜„í•¨
  - `kubectl exec` `kubectl port-forward` `kubectl attach` ë“±ë“±...

---

# kube-apiserver

- ì£¼ìš” ì±…ì„ì€ `ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬` í•˜ëŠ”ê²ƒ
- í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ë“¤ì–´ê°€ë©´
  - Rate Limiting
  - Authentication
  - Authorization
  - Validation
  - Defaulting
- ë“±ì˜ ê³¼ì •ì„ ê±°ì³ etcd ì— ì €ì¥í•˜ê±°ë‚˜ ë°ì´í„°ë¥¼ ì½ì–´ì˜®

---

# kubelet

![w:1000](https://kubernetes.io/images/docs/components-of-kubernetes.svg)

---

# kubelet

- kube-apiserver ì™€ í†µì‹ í•´ì„œ Pod ì„ ì–¸ì„ ì§€ì¼œë³´ê³  ìˆë‹¤ê°€
- ìì‹ ì´ ê´€ë¦¬í•˜ëŠ” ë…¸ë“œì— ë°°ì •ëœ Pod ë¥¼ ë³´ë©´
- Container Runtime Interface (CRI) ë¥¼ í†µí•´ì„œ
  - ~~Docker~~, Containerd, CRI-O, Kata Containers, gVisor
- ë“±ì˜ Container Runtime ë“¤ì„ ì´ìš©í•´ì„œ ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰

---

# kubelet

- `ìì‹ ì´ ê´€ë¦¬í•˜ëŠ” ë…¸ë“œì— ë°°ì •ëœ Pod ë¥¼ ë³´ë©´`
  -> ëˆ„ê°€?

---

# kube-scheduler

- `ìì‹ ì´ ê´€ë¦¬í•˜ëŠ” ë…¸ë“œì— ë°°ì •ëœ Pod ë¥¼ ë³´ë©´`
  -> kube-scheduler

---

# kube-scheduler

- Deployment ë¥¼ ì„ ì–¸í–ˆë‹¤.
- Pod ê°€ ë§ì´ ë§Œë“¤ì–´ì¡Œë‹¤.
  - í•˜ì§€ë§Œ `spec.nodeName` í•„ë“œëŠ” ë¹„ì–´ì ¸ ìˆë‹¤.
- ì´ê²ƒì„ ì±„ì›Œì£¼ëŠ”ê²ƒì´ `kube-scheduler` ì˜ ì—­í• 

---

# kube-scheduler

- ë‘ ê°€ì§€ íƒ€ì…ì— í•´ë‹¹í•˜ëŠ” ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸(=ì•Œê³ ë¦¬ì¦˜) ì— ì˜í•´ì„œ ê²°ì •
  - `Filtering`
    Taint, TCP Port, GPU Device, PV ê°€ìš© ë…¸ë“œ, Pod IP ì£¼ì†Œ ë“±ì„ ê³ ë ¤
    ì• ì´ˆì— ë°°í¬ê°€ ë¶ˆê°€ëŠ¥í•œ ë…¸ë“œë¥¼ ì œì™¸í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ë“¤
  - `Scoring`
    CPU, Memory Requests, Pod ë°°í¬ ì„ í˜¸ë„, ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€ë“±ì„ ê³ ë ¤
    ì–´ëŠ ë…¸ë“œì— ë°°í¬ë˜ëŠ”ê²ƒì„ ë” ì„ í˜¸ë˜ëŠ”ì§€ ê³„ì‚°í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ë“¤
- ì›í•œë‹¤ë©´ íŠ¹ì • Filtering ì´ë‚˜ Scoring í”ŒëŸ¬ê·¸ì¸ì„ ë¹„í™œì„±í™” í•˜ë˜ê°€ ê°€ì¤‘ì¹˜ë¥¼ ì¤„ ìˆ˜ ìˆìœ¼ë‚˜, ëŒ€ì²´ë¡œëŠ” ê±´ë“œë¦´ ì¼ ì—†ìŒ

---

# kube-proxy

- Service ClusterIP ë¥¼ í†µí•´ì„œ ì‹¤ì œ ë‹¤ë¥¸ Pod ë“¤ê³¼ í†µì‹ ì´ ê°€ëŠ¥
- í•˜ì§€ë§Œ ì–´ë–»ê²Œ?

---

# kube-proxy

- Service ClusterIP ë¥¼ í†µí•´ì„œ ì‹¤ì œ ë‹¤ë¥¸ Pod ë“¤ê³¼ í†µì‹ ì´ ê°€ëŠ¥
- ì´ˆì°½ê¸°ì—ëŠ”
  - ClusterIP ë¥¼ dst ë¡œ ê°€ì§€ëŠ” íŒ¨í‚·ì„
  - tcpdump ì™€ ê°™ì€ ì›ë¦¬ë¡œ ë‚šì•„ì±„ì„œ
  - HAProxy ë‚˜ Nginx ì²˜ëŸ¼ ì‘ë™

---

# kube-proxy

- Service ClusterIP ë¥¼ í†µí•´ì„œ ì‹¤ì œ ë‹¤ë¥¸ Pod ë“¤ê³¼ í†µì‹ ì´ ê°€ëŠ¥
- ì´ˆì°½ê¸°ì—ëŠ”
  - ClusterIP ë¥¼ dst ë¡œ ê°€ì§€ëŠ” íŒ¨í‚·ì„
  - tcpdump ì™€ ê°™ì€ ì›ë¦¬ë¡œ ë‚šì•„ì±„ì„œ
  - HAProxy ë‚˜ Nginx ì²˜ëŸ¼ ì‘ë™
- ìš”ì¦˜ì€
  - IPVS ë¼ëŠ” ë¦¬ëˆ…ìŠ¤ ì»¤ë„ë‹¨ì˜ SW LB ë¥¼ í™œìš©

---

# kube-proxy

- Service ClusterIP ë¥¼ í†µí•´ì„œ ì‹¤ì œ ë‹¤ë¥¸ Pod ë“¤ê³¼ í†µì‹ ì´ ê°€ëŠ¥
- ì´ˆì°½ê¸°ì—ëŠ”
  - ClusterIP ë¥¼ dst ë¡œ ê°€ì§€ëŠ” íŒ¨í‚·ì„
  - tcpdump ì™€ ê°™ì€ ì›ë¦¬ë¡œ ë‚šì•„ì±„ì„œ
  - HAProxy ë‚˜ Nginx ì²˜ëŸ¼ ì‘ë™
- ìš”ì¦˜ì€
  - IPVS ë¼ëŠ” ë¦¬ëˆ…ìŠ¤ ì»¤ë„ë‹¨ì˜ SW LB ë¥¼ í™œìš©
- í˜¹ì€
  - eBPF ë¥¼ ì‚¬ìš©í•´ì„œ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‘ë™ (=Cilium)

---

# Q&A

---

<!--1ì‹œê°„ 30ë¶„-->

# Kubernetes êµ¬ì„±ìš”ì†Œ + Controller ë€?

- controllerë€?
- kube-controller-manager
- cloud-controller-manager

---

# Controller ë€?

---

Gaming **Controller**

![](../week-3/0.controller.game.webp)

---

Micro **Controller**

![bg 100%](../week-3/0.controller.micro.png)

---

Spring **Controller**

![80%](../week-3/0.controller.spring.png)

---

# Q. ì»¨íŠ¸ë¡¤ëŸ¬ì— ëŒ€í•´ì„œ ì •ì˜ë¥¼ ë‚´ë ¤ë´…ì‹œë‹¤

---

# Q. ì„ ì–¸í˜• API ì™€ ëª…ë ¹í˜• API ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€ìš”?

---

# ì„ ì–¸í˜• API ë€?

ê¸°ë³¸ì ì¸ ì»¨ì…‰ì€

1. ë‚´ê°€ ì›í•˜ëŠ” ìƒíƒœë¥¼ ì„ ì–¸í•œë‹¤.
2. ì‹œìŠ¤í…œì€ ë‚´ê°€ ì›í•˜ëŠ” ìƒíƒœë¡œ ë§ì¶°ì¤€ë‹¤.

- [Docker](https://docs.docker.com/engine/api/v1.43/) > ëª…ë ¹í˜•
- [Kubernetes](https://s3.iwanhae.kr/public/k8s/index.html) > ì„ ì–¸í˜•

---

## ì–´ë–»ê²Œ "ì‹œìŠ¤í…œì€ ë‚´ê°€ ì›í•˜ëŠ” ìƒíƒœë¡œ ë§ì¶°"ì¤„ê¹Œ?

-> Controller Pattern

---

# ì—ì–´ì»¨ ì»¨íŠ¸ë¡¤ëŸ¬

- Closed Loop System
- ê¸°ê³„ê³µí•™ì—ì„œëŠ” í—ˆêµ¬í•œë‚  ì“°ëŠ” ìš©ì–´
- ê¸°ê³„ê³µí•™ì˜ ê°œë…ì„ CSì—ì„œ ë¹Œë¦¼

![bg right:50% w:500](../week-3/1.AC.png)

---

# K8s Controller

[link](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-api-machinery/controllers.md)

```go
for {
  desired := getDesiredState()
  current := getCurrentState()
  makeChanges(desired, current)
}
```

---

# ë¬¼ë¡  í˜„ì‹¤ì€ ì €ë ‡ê²Œ ê°„ë‹¨í•˜ì§„ ì•ŠìŒ - 1

[link](https://cloudark.medium.com/kubernetes-custom-controllers-b6c7d0668fdf)

- ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ì¤„ì´ê¸°ìœ„í•œ ìºì‹±
- ë™ì‹œì„± ì´ìŠˆë¥¼ ì²˜ë¦¬í•˜ê¸°ìœ„í•œ íì‰
- ì½”ë“œ ì¬ì‚¬ìš©ì„±ì„ ìœ„í•œ ë³µì¡í•œ ì•„í‚¤í…ì²˜
- kube-apiserver ë¶€í•˜ë¥¼ ë‚®ì¶”ê¸° ìœ„í•œ ê°ì¢… ê¸°ë¯¹ë“¤
- ê°ì¢… ì˜ˆì™¸ìƒí™© ì²˜ë¦¬

![bg blur:5px](../week-3/1.controller.webp)

---

# ë¬¼ë¡  í˜„ì‹¤ì€ ì €ë ‡ê²Œ ê°„ë‹¨í•˜ì§„ ì•ŠìŒ - 2

- `kubectl get leases.coordination.k8s.io`
- ë™ì‹œê°„ì— í•˜ë‚˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì¡°ì‘í•˜ëŠ”ê±´ ìµœëŒ€ 1ê°œì˜ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë˜ê²Œí•˜ê¸°ìœ„í•œ lease api

---

# ê·¸ë˜ë„ ê¸°ë³¸ì€

[link](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-api-machinery/controllers.md)

```go
for {
  desired := getDesiredState()
  current := getCurrentState()
  makeChanges(desired, current)
}
```

---

K8s ì˜ **ê±°ì˜ ëŒ€ë¶€ë¶„ì˜** ìš”ì†ŒëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´ì„ ë”°ë¦„

- `kubelet`:
  Pod ì˜ desiredState ë³´ê³  CRI ë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆì˜ Current State ê°€ Desired State ì™€ ê°™ê²Œ ë…¸ë ¥
- `kube-proxy`:
  Service ì˜ desiredState ë¥¼ ë³´ê³  IPTables ì™€ IPVS ë¥¼ ì¡°ì‘í•´ Current State ê°€ (ì´í•˜ìƒëµ)
- `cloud-controller-manager`:
  Node, Loadbalancer ë“±ì˜ desiredState ë³´ê³  CSP API ì°”ëŸ¬ì„œ Current (ì´í•˜ìƒëµ)
- `kube-controller-manager`:
  ìœ„ì™€ ê°™ì€ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ 40ê°œ ë„˜ê²Œ ëŒì•„ê°€ëŠ” ì»´í¬ë„ŒíŠ¸

---

# Q&A

---

# kube-controller-manager

- ëŒ€ì¶© 40ê°œê°€ ë„˜ì–´ê°€ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì„ í•˜ë‚˜ì˜ ë°”ì´ë„ˆë¦¬ë¡œ ë¬¶ì€ ì»´í¬ë„ŒíŠ¸
- ë¬¸ì ê·¸ëŒ€ë¡œì˜ ì˜ë¯¸ë¡œ ìš°ë¦¬ê°€ ì“°ëŠ” ëª¨ë“  K8s ì— ê¸°ëŒ€ë˜ëŠ” ì•¡ì…˜ì€ kube-controller-manager ê°€ í•´ì£¼ëŠ”ê²ƒ
- ê·¼ë° ë¬¸ì„œí™” ì•ˆë˜ì–´ìˆìŒ ìì„¸íˆ ì•Œë ¤ë©´ ì½”ë“œë¥¼ ëœ¯ì–´ë³´ëŠ” ë°©ë²•ë°–ì—...
- [ë§›ë³´ê¸° ğŸ˜](https://github.com/kubernetes/kubernetes/tree/v1.28.4/cmd/kube-controller-manager/app)
  - clusterroleaggregation
  - apps/v1 Deployment

---

# Deployment

- [OpenShift](https://github.com/kubernetes/kubernetes/issues/1743#issuecomment-91431450) ì—ì„œ ë§Œë“¤ì–´ì§„ ê°œë…ì´ K8s ì— ì ìš©ëœ ì‚¬ë¡€
- K8s ì—ì„œ ê°€ì¥ ì¼ìƒì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤
- Deployment > ReplicaSet > Pod
- ReplicaSet ê³¼ ë³„ë„ë¡œ ì¡´ì¬í•˜ëŠ” ì´ìœ :
  - ReplicaSet ì€ ìˆ«ì ìœ ì§€ì— ì´ˆì ì„ ë‘ 
  - Deployment ëŠ” ìˆ«ì ì¡°ì ˆì— ì´ˆì ì„ ë‘ 

---

# Deployment ì§ˆë¬¸

Q. ë…¸ë“œ 3ê°œì— Replicas ê°€ 99ë¡œ ì„¤ì •ëœ Deploymentë¥¼ ë°°í¬í•˜ë©´
`kube-controller-manager` ëŠ” Pod ì„ ì–´ë–¤ ë…¸ë“œì— í• ë‹¹í• ê¹Œ?

Q. ReadWriteOnce íŠ¹ì§•ì„ ê°€ì§„ PVë¥¼ Deploymentë¡œ ê´€ë¦¬í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

Q. Elasticsearch, etcd, ZooKeeper ë¥¼ Deployment ë¡œ ê´€ë¦¬í•˜ê¸° ê¹Œë‹¤ë¡œìš´ ì´ìœ ?

---

# StatefulSet

- ë³¸ë˜ ì´ë¦„ì€ PetSet (Q. Petì˜ ë°˜ëŒ€ë˜ëŠ” ê°œë…ì€?)
- 3ê°œì˜ ë¬¸ì œ ì œê¸°ì—ì„œ ì‹œì‘ [Link](https://github.com/kubernetes/kubernetes/issues/260)
- 3ê°€ì§€ íŠ¹ì§•
  1. ê°œë³„ Pod ì„ íŠ¹ì •í•˜ê¸° ì‰½ê²Œ ë„¤ì´ë°
  2. ê°œë³„ Pod ê³¼ ì—°ê²°í•˜ê¸° ì‰½ê²Œ DNS ì£¼ì†Œ ë¶€ì—¬
  3. PVC ê´€ë¦¬ê°™ì´í•´ì¤Œ

---

# DaemonSet

- ë¡œê·¸ìˆ˜ì§‘í•˜ê±°ë‚˜ í•˜ë‚˜ì˜ ë…¸ë“œì— í•˜ë‚˜ì˜ ì„œë²„ë§Œ ë„ìš°ëŠ” (HDFS) ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ë‚˜ì˜¨ ì»¨ì…‰ [link](https://github.com/kubernetes/kubernetes/issues/1518)
- ì‹¤ì œ Productionì—ì„œ ì˜ì™¸ë¡œ StatefulSet ê³¼ ê³ ë¯¼í•˜ëŠ” ê²½ìš°ê°€ ì¢…ì¢… ìˆìŒ
- ë¡œê·¸ & ë©”íŠ¸ë¦­ / ë„¤íŠ¸ì›Œí‚¹ / ìŠ¤í† ë¦¬ì§€ ì—ì´ì „íŠ¸ ìš©ë„ë¡œ ìì£¼ ì‚¬ìš©
- `kube-proxy` ë˜í•œ DaemonSet

---

# Controller Pattern ì˜ ì¢‹ì€ì ?

---

# Ingress ì˜ ì‚¬ë¡€

- [ì–´ë””ì—ë„](https://github.com/kubernetes/kubernetes/tree/v1.28.4/cmd/kube-controller-manager/app) Ingress ê´€ë ¨ëœ ë‚´ìš©ì€ ì—†ìŒ
- í•˜ì§€ë§Œ ì‹¤ì œ Ingress ëŠ” ì˜ ì‘ë™í–ˆì—ˆìŒ

- ëˆ„ê°€ Ingress ë¦¬ì†ŒìŠ¤ë¥¼ ë³´ê³ ì„œ ìš°ë¦¬ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ ì„¤ì •ì„ í•´ì£¼ëŠ” ê²ƒì¼ê¹Œ?

---

# ingress-nginx-controller

[link](https://github.com/kubernetes/ingress-nginx)

- Ingress ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì¼œë³´ê³  ìˆë‹¤ê°€
- ë³€í™”ê°€ ìƒê¸°ë©´
- `nginx.conf` íŒŒì¼ì„ ìƒˆë¡œ ìƒì„±í•œë’¤
- `nginx -s reload` ëª…ë ¹ì–´ë¥¼ ëŒ€ì‹  ìˆ˜í–‰í•´ì¤Œ

---

# HAProxy Kubernetes Ingress Controller

- Ingress ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì¼œë³´ê³  ìˆë‹¤ê°€
- ë³€í™”ê°€ ìƒê¸°ë©´
- `HAProxy` ì„¤ì •ì„ ì ë‹¹íˆ ë³€ê²½í•´ì¤Œ

---

# aws-load-balancer-controller

- Ingress ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì¼œë³´ê³  ìˆë‹¤ê°€
- ë³€í™”ê°€ ìƒê¸°ë©´
- AWS ALB API ë¥¼ ì ë‹¹íˆ ì°”ëŸ¬ì¤Œ

---

# ingress-gce

- Ingress ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì¼œë³´ê³  ìˆë‹¤ê°€
- ë³€í™”ê°€ ìƒê¸°ë©´
- GCP L7 LB API ë¥¼ ì ë‹¹íˆ ì°”ëŸ¬ì¤Œ

---

# Ingress

- ì„œë¡œë‹¤ë¥¸ ì¸í”„ë¼ í˜•ìƒê³¼ ìš”êµ¬ì‚¬í•­ì— ì˜í•´ì„œ ì–¸ì œë“  ë¶€ì¡±í•¨ì´ ë°œìƒí•¨
- K8s ëŠ” ì´ê±¸ í˜¼ìì„œ í•´ê²°í•˜ë ¤ê³  ì•ˆí•¨
- Ingress ë¼ëŠ” Resource ë¥¼ ë§¤ê°œë¡œ, ì‹¤ì œ ì‘ì—…ì€ Controller ê°€ ìˆ˜í–‰
- ê´€ë¦¬ìëŠ” ìê¸° ìƒí™©ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼
  - êµ¬í˜„í•˜ë˜ê°€
  - ì„¤ì¹˜í•˜ë˜ê°€

---

# ë¦¬ì†ŒìŠ¤

ë§Œì•½ `Ingress` ê°€ ì•„ë‹Œ ë‹¤ë¥¸ê²ƒì´ í•„ìš”í•˜ë‹¤ë©´?

---

# ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤

ë§Œì•½ `Ingress` ê°€ ì•„ë‹Œ ë‹¤ë¥¸ê²ƒì´ í•„ìš”í•˜ë‹¤ë©´?
=> `Custom Resource Definition` (ì´í•˜ `CRD`)

---

# ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤

ë§Œì•½ `Ingress` ê°€ ì•„ë‹Œ ë‹¤ë¥¸ê²ƒì´ í•„ìš”í•˜ë‹¤ë©´?
=> `Custom Resource Definition` (ì´í•˜ `CRD`)
=> ìì‹ ì´ ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ `ì„ ì–¸` í•´ì£¼ëŠ” `ë¦¬ì†ŒìŠ¤`

---

# ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤

ë§Œì•½ `Ingress` ê°€ ì•„ë‹Œ ë‹¤ë¥¸ê²ƒì´ í•„ìš”í•˜ë‹¤ë©´?
=> `Custom Resource Definition` (ì´í•˜ `CRD`)
=> ìì‹ ì´ ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ `ì„ ì–¸` í•´ì£¼ëŠ” `ë¦¬ì†ŒìŠ¤`

=> `CRD` ë¥¼ `ì„ ì–¸` í•˜ë©´ ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ (=`Custom Resource`) ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

---

# ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤

- ElasticSearch ë¥¼ ìë™ìœ¼ë¡œ ìš´ì˜í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
- ë„¤íŠ¸ì›Œí¬ ë°©í™”ë²½ì„ ìë™ìœ¼ë¡œ ì„¤ì •í•´ì£¼ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
- TLS ì¸ì¦ì„œë¥¼ ìë™ìœ¼ë¡œ ë°œê¸‰ë°›ì•„ì£¼ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
- í—¬ë¦„ì°¨íŠ¸ë¥¼ ëŒ€ì‹  ë°°í¬í•´ì£¼ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
- AWS ìƒ ë¦¬ì†ŒìŠ¤ë¥¼ ëŒ€ì‹  ê´€ë¦¬í•´ì£¼ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
- ìë™ìœ¼ë¡œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘í•´ì£¼ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
- ë“±ë“±ë“±...

---

# cloud-controller-manager

- Ingress ì²˜ëŸ¼ K8s ì™€ ê¸°ë³¸ìœ¼ë¡œ ê°™ì´ ì˜¤ëŠ” ë¦¬ì†ŒìŠ¤ì„ì—ë„ ë¶ˆêµ¬í•˜ê³ 
- K8s ê°€ ë¡œì§ì„ êµ¬í˜„ì„ ì•ˆí•œê²ƒë“¤ì´ ì¡´ì¬

---

# cloud-controller-manager

- Ingress ì²˜ëŸ¼ K8s ì™€ ê¸°ë³¸ìœ¼ë¡œ ê°™ì´ ì˜¤ëŠ” ë¦¬ì†ŒìŠ¤ì„ì—ë„ ë¶ˆêµ¬í•˜ê³ 
- K8s ê°€ ë¡œì§ì„ êµ¬í˜„ì„ ì•ˆí•œê²ƒë“¤ì´ ì¡´ì¬
  - Service, LoadBalancer
  - Persistent Volume (Claim)
  - NetworkPolicy

---

# cloud-controller-manager

- Ingress ì²˜ëŸ¼ K8s ì™€ ê¸°ë³¸ìœ¼ë¡œ ê°™ì´ ì˜¤ëŠ” ë¦¬ì†ŒìŠ¤ì„ì—ë„ ë¶ˆêµ¬í•˜ê³ 
- K8s ê°€ ë¡œì§ì„ êµ¬í˜„ì„ ì•ˆí•œê²ƒë“¤ì´ ì¡´ì¬
  - Service, LoadBalancer => `cloud-controller-manager`
  - Persistent Volume (Claim)
  - NetworkPolicy

[ë§í¬](https://github.com/kubernetes/cloud-provider/blob/master/cloud.go#L42-L69)

---

# Q&A

---

# ë‹¤ì‹œ í•œë²ˆ í•´ë´…ì‹œë‹¤ ğŸ˜

https://github.com/iwanhae/simple-loadtester

---

# ì™œ ì•ˆë˜ì£ ?

---

https://k3s.io/

```
kubeadm reset
curl -sfL https://get.k3s.io | sh -
```

---

# ì‹¤ìŠµ PDF ë¡œ ì´ë™

---

<!--2ì‹œê°„-->

# Kubernetes ì¸ì¦ / ì¸ê°€ / Admission Controller

- ì¸ì¦
- ì¸ê°€
- Admission Controller (ADC)

---

# Q. ì¸ì¦ê³¼ ì¸ê°€ì˜ ì •ì˜

---

# ì¸ì¦

- ë‚´ê°€ "ëˆ„êµ¬"ì¸ì§€ ì•Œì•„ë‚´ëŠ”ê²ƒ

# ì¸ê°€

- "ëˆ„êµ¬"ê°€ ì´ê±¸ í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë‚´ëŠ”ê²ƒ

ì¸ì¦ + ì¸ê°€ = ë‚´ê°€ ì´ê±¸ í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë‚´ëŠ”ê²ƒ

---

# K8s ì—ì„œ ì¸ì¦ê³¼ ì¸ê°€

K8s ì—ì„œ ì¸ì¦ê³¼ ì¸ê°€ì— ëŒ€í•œ ì¸í„°í˜ì´ìŠ¤ëŠ” ê°„ë‹¨í•¨

```go
// ì¸ì¦
type Request interface {
	AuthenticateRequest(req *http.Request) (*Response, bool, error)
}
// Response ì˜ ë‚´ìš©ë¬¼
type user.Info interface {
    GetName() string
    GetGroups() []string
    GetUID() string // ë™ì¼í•œ Name êµ¬ë¶„ìš©ì´ê¸´ í•œë°, audit ì´ì™¸ì— ì˜ í™œìš© X
    GetExtra() map[string][]string // íŠ¹ìˆ˜í•œì¼€ì´ìŠ¤ì—ì„œ ì‚¬ìš©
}
```

---

# K8s ì—ì„œ ì¸ì¦ê³¼ ì¸ê°€

K8s ì—ì„œ ì¸ì¦ê³¼ ì¸ê°€ì— ëŒ€í•œ ì¸í„°í˜ì´ìŠ¤ëŠ” ê°„ë‹¨í•¨

```go
// ì¸ê°€
type Authorizer interface {
	Authorize(ctx context.Context, a Attributes) (authorized Decision, reason string, err error)
}

type Attributes interface {
    // User Group | GVK Namespace Name Subresource | Verb
}

type Decision int

const (
	DecisionDeny Decision = iota
	DecisionAllow
	DecisionNoOpinion
)
```

---

# Kubernetes ì—ì„œ ì¸ì¦ êµ¬í˜„ì²´

- X509 Client Certs
- Static Token File
- Bootstrap Tokens
- Service Account Tokens
- OpenID Connect Tokens
- Webhook Token Authentication
- Authenticating Proxy

---

- X509 Client Certs > x509 ì¸ì¦ì„œì—ì„œ `CN` ê³¼ `O` í•„ë“œë§Œ í™•ì¸
- Static Token File > kube-apiserver ë…¸ë“œì— CSV í˜•íƒœë¡œ íŒŒì¼ ì €ì¥
- Bootstrap Tokens > ìƒˆë¡œìš´ ë…¸ë“œ ì¶”ê°€í• ë•Œ ì‚¬ìš©
- Service Account Tokens > K8s Pod ì—ì„œ API ì ‘ê·¼í• ë•Œ ì£¼ë¡œ ì‚¬ìš©
  `system:serviceaccounts` ê·¸ë£¹
  `system:serviceaccount:(NAMESPACE):(SERVICEACCOUNT)` ìœ ì €
- OpenID Connect Tokens > OAuth í˜¸í™˜.
  JWT ì—ì„œ `sub` ì™€ `groups` í•„ë“œë§Œ í™•ì¸
- Webhook Token Authentication > ì™¸ë¶€ ì¸ì¦ ì„œë²„ì— ì›¹í›…ë°©ì‹ìœ¼ë¡œ ì§ˆì˜
- Authenticating Proxy > Proxy ì„œë²„ì—ì„œì˜ ìš”ì²­ì—ì„œ `X-Remote-User` `X-Remote-Group` í™•ì¸

---

# Demo

```
curl -k \
 --cert /etc/kubernetes/pki/front-proxy-client.crt \
 --key /etc/kubernetes/pki/front-proxy-client.key \
 -H "X-Remote-Group: system:masters" \
 -H "X-Remote-User: help" \
 https://127.0.0.1:6443/apis

```

---

# Kubernetes ì¸ì¦

ë‹¤ì–‘í•œ ë°©ì‹ì´ ì¡´ì¬í•˜ì§€ë§Œ ê²°ë¡ ì€

HTTP ìš”ì²­ì—ì„œ ì•„ë˜ ì •ë³´ ì•Œì•„ë‚´ê¸°

```go
// ì¸ì¦
type Request interface {
	AuthenticateRequest(req *http.Request) (*Response, bool, error)
}
// Response ì˜ ë‚´ìš©ë¬¼
type user.Info interface {
    GetName() string
    GetGroups() []string
    GetUID() string // ë™ì¼í•œ Name êµ¬ë¶„ìš©ì´ê¸´ í•œë°, audit ì´ì™¸ì— ì˜ í™œìš© X
    GetExtra() map[string][]string // íŠ¹ìˆ˜í•œì¼€ì´ìŠ¤ì—ì„œ ì‚¬ìš©
}
```

---

# Kubernetes ì—ì„œ ì¸ê°€ Interface

```go
// ì¸ê°€
type Authorizer interface {
	Authorize(ctx context.Context, a Attributes) (authorized Decision, reason string, err error)
}

type Attributes interface {
    // User Group | GVK Namespace Name Subresource | Verb
}

type Decision int

const (
	DecisionDeny Decision = iota
	DecisionAllow
	DecisionNoOpinion
)
```

---

# Kubernetes ì—ì„œ ì¸ê°€ êµ¬í˜„ì²´

- ABAC
- RBAC
- Node
- Webhook
- Always Allow
- Always Deny

---

# Kubernetes ì—ì„œ ì¸ê°€ êµ¬í˜„ì²´

- ABAC > deprecated
- RBAC > ë³´í†µ ë§ì´ ë³´ëŠ”ê²ƒ
- Node > kubelet ì„ ìœ„í•œ ì¸ê°€ë°©ì‹ ê·¸ë˜í”„ë°©ì‹ìœ¼ë¡œ ì¸ê°€ ë°ì´í„°ë¥¼ ê´€ë¦¬
- Webhook > ì™¸ë¶€ ì„œë²„ì— ì›¹í›… ë°©ì‹ìœ¼ë¡œ ì¸ê°€ì—¬ë¶€ë¥¼ íŒë‹¨
- Always Allow
- Always Deny

---

# Kubernetes ì¸ê°€

ë‹¤ì–‘í•œ ë°©ì‹ì´ ì¡´ì¬í•˜ì§€ë§Œ ê²°ë¡ ì€

HTTP ìš”ì²­ì—ì„œ

```go
type Decision int

const (
	DecisionDeny Decision = iota
	DecisionAllow
	DecisionNoOpinion
)
```

ìœ„ ì •ë³´ ì•Œì•„ë‚´ê¸°

---

# Q&A

---

# Kubernetes RBAC Scope

K8s ì—ì„œ RBAC ì€ 2ê°€ì§€ Scope ê°€ ì¡´ì¬

1. ClusterRole / ClusterRoleBinding:
   í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ì„œ ìœ íš¨
   `/apis/${GroupVersion}/${kind}`
2. Role / RoleBinding
   í•´ë‹¹ ë¦¬ì†ŒìŠ¤ê°€ ì„ ì–¸ëœ Namespace ë‚´ë¶€ì—ì„œë§Œ ìœ íš¨
   `/apis/${GroupVersion}/namespaces/${namespace}/${kind}`

---

# Demo

ClusterRole ë¦¬ì†ŒìŠ¤ ë³´ê¸° [src](https://github.com/kubernetes/kubernetes/blob/v1.28.0-alpha.4/pkg/apis/rbac/types.go#L43-L63)

1. `kubectl get clusterrole system:kube-scheduler -o json | jq`
2. `kubectl get clusterrole system:auth-delegator -o json | jq`

---

# Admission Controller

![w:1100](https://kubernetes.io/images/blog/2019-03-21-a-guide-to-kubernetes-admission-controllers/admission-controller-phases.png)

---

# Admission Controller

- https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/
- Validating Admission Webhook
- Mutating Admission Webhook

---

# Admission Controller

- ì„¸ë¶€ ë³´ì•ˆìš”ê±´ ì¶©ì¡±
- ìš©ìœ¼ë¡œ ì“°ë¼ê³  ë§Œë“¤ì—ˆì§€ë§Œ....

---

# Admission Controller

- Human Error ë°©ì§€ (=> ingress-nginx)
- ë‹¨ìˆœ ì‘ì—… ìë™í™” (=> Istio)
- ë“±ìœ¼ë¡œ ë” ë§ì´ í™œìš©

---

<!--1ì‹œê°„-->

# Kubernetes Networking

---

# Q&A

---

# Overview

<div class="grid grid-cols-2 gap-4">
<div>

### Overlay ë°©ì‹

![w:500](./2-encap.png)

</div>
<div>

### Native Routing ë°©ì‹

![w:260](./2-native.png)

</div>
</div>

---

# ì¥ë‹¨ì 

<div class="grid grid-cols-2 gap-4">
<div>

### Overlay ë°©ì‹ ì¥ì 

- ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ì— ëŒ€í•œ ì†Œìœ ê¶Œì´ ì—†ì–´ë„ ì–´ë””ì„œë“  ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
  - ì‚¬ì„¤ IP ì£¼ì†Œë¥¼ ë§ˆìŒê» í™œìš© í•  ìˆ˜ ìˆë‹¤.
- íŒ¨í‚·ì´ ì•”í˜¸í™” í•  ìˆ˜ ìˆì–´ ë³´ì•ˆì ìœ¼ë¡œ ë” ì•ˆì „í•  ìˆ˜ ìˆë‹¤.

</div>
<div>

### Native Routing ë°©ì‹ ë‹¨ì 

- ë„¤íŠ¸ì›Œí¬ ë¼ìš°í„°ì— ëŒ€í•œ ì„¤ì •ê¶Œí•œì´ ì—†ìœ¼ë©´ ì‚¬ìš©í•˜ê¸° í˜ë“¤ë‹¤.
- í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ ì™¸ë¶€ êµ¬ë¶„ì—†ì´ ëª¨ë“  í†µì‹ ì€ ë„¤íŠ¸ì›Œí¬ ì „ì—­ì—ì„œ ìœ íš¨í•´ ë°©í™”ë²½ ì •ì±…ì— ëŒ€í•´ì„œ ê³ ë¯¼í•´ë´ì•¼ í•œë‹¤.

</div>
</div>

---

# ì¥ë‹¨ì 

<div class="grid grid-cols-2 gap-4">
<div>

### Overlay ë°©ì‹ ë‹¨ì 

- ë„¤íŠ¸ì›Œí¬ ì²˜ë¦¬ì— ëŒ€í•œ CPU, Memory ì˜¤ë²„í—¤ë“œê°€ í¬ë‹¤
- ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ì´ ë³µì¡í•´ì§„ë‹¤.
  (=ì´ìŠˆ ë°œìƒì‹œ ì›ì¸ë¶„ì„ì´ ê¹Œë‹¤ë¡­ë‹¤.)
- í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì™€ ë‚´ë¶€ê°€ ê²©ë¦¬ë˜ì–´ìˆì–´ LoadBalancer ë‚˜ NodePort ì™€ ê°™ì€ ë°©ì‹ì„ ê³ ë¯¼í•´ë´ì•¼ í•œë‹¤.

</div>
<div>

### Native Routing ë°©ì‹ ì¥ì 

- ë§¤ìš° ë¹ ë¥´ë‹¤.
- íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì´ ë¹„êµì  ì‰½ë‹¤
- í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œ ìì—°ìŠ¤ëŸ½ê²Œ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.

</div>
</div>

---

# Q&A
